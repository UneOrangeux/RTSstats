<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>TT RTS Leaderboard – Minimal (External JS)</title>
<link rel="preconnect" href="https://cdn.tycoon.community">
<link rel="preconnect" href="https://v1.api.tycoon.community">
<style>
  body{font:14px/1.45 system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:0;background:#0b1220;color:#e6edf3}
  .wrap{max-width:920px;margin:0 auto;padding:20px}
  .card{background:#0f1629;border:1px solid #1f2a44;border-radius:14px;padding:14px;margin-bottom:14px}
  h1{font-size:20px;margin:0 0 8px}
  label{font-size:12px;color:#9fb3c8}
  input{width:100%;padding:8px 10px;border-radius:10px;border:1px solid #233053;background:#0b1220;color:#e6edf3}
  .row{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:10px}
  .row2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  button{border:none;border-radius:10px;padding:10px 12px;background:#2f6feb;color:#fff;font-weight:700;cursor:pointer}
  table{width:100%;border-collapse:collapse;font-size:13px}
  th,td{border-bottom:1px solid #1f2a44;padding:8px 6px;text-align:left}
  th{color:#9fb3c8;text-transform:uppercase;font-size:11px;letter-spacing:.03em}
  .muted{color:#9fb3c8}
  .mono{font-family:ui-monospace,Menlo,Consolas,monospace}
  .status{font-size:12px;color:#9fb3c8}
  .buttons{display:flex;gap:8px;align-items:flex-end}
  pre{white-space:pre-wrap}
</style>
</head>
<body>
<div class="wrap">
  <h1>TT RTS Leaderboard</h1>
  <div class="card">
    <div class="row2">
      <div>
        <label>Private API Key</label>
        <input id="apiKey" placeholder="X-Tycoon-Key">
      </div>
      <div>
        <label>Public Key (optional)</label>
        <input id="pubKey" placeholder="X-Tycoon-Public-Key">
      </div>
    </div>
    <div class="row" style="margin-top:10px">
      <div>
        <label>Min streak</label>
        <input id="minStreak" type="number" value="0">
      </div>
      <div>
        <label>Max streak</label>
        <input id="maxStreak" type="number" placeholder="(none)">
      </div>
      <div>
        <label>Request limit</label>
        <input id="limit" type="number" value="50">
      </div>
      <div class="buttons">
        <button type="button" id="refreshBtn">Refresh</button>
        <button type="button" id="testBtn" title="Quick JS test">Test</button>
      </div>
    </div>
    <details style="margin-top:10px">
      <summary class="muted">Advanced (only change if needed)</summary>
      <div class="row" style="margin-top:8px">
        <div>
          <label>API Base</label>
          <input id="apiBase" value="https://v1.api.tycoon.community">
        </div>
        <div>
          <label>Streak Path</label>
          <input id="streakPath" value="/main/streak/{vrpId}">
        </div>
        <div>
          <label>Servers JSON</label>
          <input id="serversJson" value="https://cdn.tycoon.community/servers.json">
        </div>
        <div>
          <label>Use Proxy (optional)</label>
          <input id="proxyUrl" placeholder="http://127.0.0.1:8787 (if CORS blocked)">
        </div>
      </div>
    </details>
    <div class="status" id="status" style="margin-top:8px">Ready.</div>
    <pre id="log" class="muted mono" style="margin-top:8px;max-height:120px;overflow:auto"></pre>
  </div>

  <div class="card">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div class="status" id="count">0 players</div>
      <input id="filter" placeholder="Filter by name or vRP id…" style="max-width:260px">
    </div>
    <div style="overflow-x:auto;margin-top:6px">
      <table id="table">
        <thead>
          <tr><th>Rank</th><th>vRP ID</th><th>Name</th><th>RTS Streak</th><th class="muted">Locked/Err</th><th class="muted mono">Server</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <div class="card muted">
    Each API call costs 1 charge on your private key. Start with a small Request limit.
    If you see “CORS” errors, run a tiny proxy:

    <pre class="mono">npm init -y
npm i express node-fetch
node proxy.js</pre>
  </div>
</div>

<script src="app.js"></script>
</body>
</html>
